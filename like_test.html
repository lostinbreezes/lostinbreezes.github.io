<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Language" content="zh-cn">
  <style>
    .container {
      position: fixed;
      top: 20px;
      left: 20px;
    }

    .button {
      display: inline-block;
      padding: 10px;
      background-image: url('http://img.fallen.wang/likebutton.png');
      background-repeat: no-repeat;
      background-position: center;
      background-color: transparent;
      border: none;
      cursor: pointer;
    }

    .count {
      display: inline-block;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <button id="btn" class="button" onclick="buttonClick()" style="width: 150px; height: 150px">　</button>

  	<div style="position: absolute; width: 163px; height: 100px; z-index: 1; left:125px; top:70px" id="layer1">
<span class="count"><font size="5">（    <font size="5"><span id="count" class="count">0</span></font> ）</font></span></div>

  </div>

  <script>
    // 检查本地存储，如果存在该IP地址的键，则表示已经按过按钮
    if (localStorage.getItem('visited')) {
      disableButton();
    }

    // 按钮点击事件处理函数
    function buttonClick() {
      var button = document.getElementById('btn');

      // 检查本地存储，如果存在该IP地址的键，则表示已经按过按钮
      if (localStorage.getItem('visited')) {
        showAlert();
      } else {
        // 切换按钮图案
        button.style.backgroundImage = "url('http://img.fallen.wang/likebutton2.png')";
        // 禁用按钮
        disableButton();

        // 增加计数
        var countElement = document.getElementById('count');
        var count = parseInt(countElement.innerText);
        count++;
        countElement.innerText = count;

        // 将IP地址存储到本地
        localStorage.setItem('visited', true);
      }
    }

    // 禁用按钮
    function disableButton() {
      var button = document.getElementById('btn');
      button.disabled = true;
      button.style.cursor = 'not-allowed';
    }

    // 弹出警告弹窗
    function showAlert() {
      alert("您已经按过按钮了！");
    }
  </script>
	</body>
</html>
