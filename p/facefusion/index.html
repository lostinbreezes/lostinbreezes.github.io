<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="就酱"><title>云端部署FaceFusion-AI换脸</title><link rel=canonical href=https://fallen.wang/p/facefusion/><link rel=stylesheet href=/scss/style.min.c565f65415901be2fc8f18ecd1a49c9dec01d957d488218bc923525a68248349.css><meta property="og:title" content="云端部署FaceFusion-AI换脸"><meta property="og:description" content="就酱"><meta property="og:url" content="https://fallen.wang/p/facefusion/"><meta property="og:site_name" content="沙多多的奇思妙想"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="facefusion"><meta property="article:published_time" content="2024-01-27T22:19:12+08:00"><meta property="article:modified_time" content="2024-01-27T22:19:12+08:00"><meta property="og:image" content="https://fallen.wang/p/facefusion/cover.png"><meta name=twitter:title content="云端部署FaceFusion-AI换脸"><meta name=twitter:description content="就酱"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fallen.wang/p/facefusion/cover.png"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huf6c6b142173f74b63b5738ac4ca6184c_63643_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>沙多多的奇思妙想</a></h1><h2 class=site-description>分一丁目赠我</h2></div></header><ol class=social-menu><li><a href=https://github.com/lostinbreezes target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#一文件下载>一、文件下载</a></li><li><a href=#二环境部署>二、环境部署</a><ol><li><a href=#python>Python</a></li><li><a href=#ffmpeg>FFmpeg</a></li><li><a href=#curl>cURL</a></li><li><a href=#虚拟环境>虚拟环境</a></li></ol></li><li><a href=#三安装项目>三、安装项目</a></li></ol></nav></div></section><div style=height:30%;width:30%><script type=text/javascript id=clstr_globe src="//clustrmaps.com/globe.js?d=2D0wa5tae5KJpH0hG3jzeMoWkzub9qDEpLDFMUlo6Dc"></script></div></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/facefusion/><img src=/p/facefusion/cover_huc37bc97bbc4df09ef51c4e7c54ad95ff_591899_800x0_resize_box_3.png srcset="/p/facefusion/cover_huc37bc97bbc4df09ef51c4e7c54ad95ff_591899_800x0_resize_box_3.png 800w, /p/facefusion/cover_huc37bc97bbc4df09ef51c4e7c54ad95ff_591899_1600x0_resize_box_3.png 1600w" width=800 height=275 loading=lazy alt="Featured image of post 云端部署FaceFusion-AI换脸"></a></div><div class=article-details><header class=article-category><a href=/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/>人工智能</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/facefusion/>云端部署FaceFusion-AI换脸</a></h2><h3 class=article-subtitle>就酱</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jan 27, 2024</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 4 分钟</time></div></footer></div></header><section class=article-content><p>写在最前面：<strong>有些步骤可能需要魔法</strong></p><p>号称***“Next generation face swapper and enhancer ”***的Facefusion 上周发布了<code>2.2.1</code> 版本。虽然对显卡要求没有以前的roop 和deepfake 那么夸张，但是GTX1650 跑起来还是比较吃力，所以决定云端部署。</p><p>这次依然是选择了老朋友恒源云，如果有动手能力也可以尝试白嫖Colab。</p><p>项目地址：https://github.com/facefusion/facefusion</p><p>官方文档：https://docs.facefusion.io/</p><p>这次创建镜像的时候选择的是<code>PyTorch</code> ><code>2.0.0</code> ><code>Cuda11.8.0</code> 刚好符合项目需求。</p><h1 id=一文件下载>一、文件下载</h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#安装cli</span>
</span></span><span class=line><span class=cl>curl -L https://download.gpushare.com/download/gpushare-cli-linux -o /usr/local/bin/gpushare-cli
</span></span><span class=line><span class=cl>chmod u+x /usr/local/bin/gpushare-cli
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#验证是否安装成功</span>
</span></span><span class=line><span class=cl>gpushare-cli version
</span></span></code></pre></td></tr></table></div></div><p>这一步是为了后续的文件传输，具体可以参考我之前的博客：https://fallen.wang/p/sovits/</p><p>然后下载模型文件：<em><strong>此链接由Bilibili用户 @AI百晓生 提供</strong></em></p><p><a class=link href="https://pan.baidu.com/s/1U_vsRu9ILHn9FQ_5iph-YQ?pwd=f86f" target=_blank rel=noopener>https://pan.baidu.com/s/1U_vsRu9ILHn9FQ_5iph-YQ?pwd=f86f</a></p><p>*这是为Windows 系统准备的，Linux 只需要下载其中的<code>models.7z</code>即可*</p><p>将项目clone 到本地：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/facefusion/facefusion
</span></span></code></pre></td></tr></table></div></div><p>如果因为<em><strong>众所周知的原因</strong></em>导致clone 失败，请使用<em><strong>魔法</strong></em>，或者自行搭建<em><strong>异次元通道</strong></em>，当然也可以下载压缩包到本地手动上传：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /hy-tmp
</span></span><span class=line><span class=cl><span class=c1>#上传项目压缩包然后解压</span>
</span></span><span class=line><span class=cl>unzip facefusion-master.zip
</span></span><span class=line><span class=cl><span class=c1>#创建模型目录，注意以.开头的文件夹是隐藏的</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> facefusion-master
</span></span><span class=line><span class=cl>mkdir .assets
</span></span><span class=line><span class=cl><span class=c1>#下载模型文件</span>
</span></span><span class=line><span class=cl>gpushare-cli baidu down models.7z
</span></span><span class=line><span class=cl><span class=c1>#解压，注意文件约6G需要使用7za命令解压</span>
</span></span><span class=line><span class=cl>7za x /usr/local/bin/models.7z
</span></span><span class=line><span class=cl><span class=c1>#将解压后的models文件夹移动至/.assets内</span>
</span></span><span class=line><span class=cl>mv /models /hy-tmp/facefusion-master/.assets
</span></span></code></pre></td></tr></table></div></div><h1 id=二环境部署>二、环境部署</h1><h2 id=python>Python</h2><p>该项目使用的是<code>Python3.10</code> ，而恒源云的Ubuntu 自带的是<code>Python3.8</code> ，因此需要升级：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#更新包列表</span>
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl><span class=c1>#安装依赖项</span>
</span></span><span class=line><span class=cl>sudo apt install -y software-properties-common
</span></span><span class=line><span class=cl><span class=c1>#添加Python3.10 的PPA 到源列表中</span>
</span></span><span class=line><span class=cl>sudo add-apt-repository ppa:deadsnakes/ppa
</span></span><span class=line><span class=cl><span class=c1>#若提示‘Press [ENTER] to continue or Ctrl-c to cancel adding it’则按回车</span>
</span></span><span class=line><span class=cl><span class=c1>#安装Python3.10</span>
</span></span><span class=line><span class=cl>sudo apt install -y python3.10
</span></span><span class=line><span class=cl><span class=c1>#验证</span>
</span></span><span class=line><span class=cl>Python3.10 --version
</span></span></code></pre></td></tr></table></div></div><h2 id=ffmpeg>FFmpeg</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt install ffmpeg
</span></span></code></pre></td></tr></table></div></div><p>若询问是否继续输入<code>y</code></p><h2 id=curl>cURL</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt install curl
</span></span></code></pre></td></tr></table></div></div><p>若询问是否继续输入<code>y</code></p><h2 id=虚拟环境>虚拟环境</h2><p>接着创建虚拟环境：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /hy-tmp/facefusion-master
</span></span><span class=line><span class=cl>python3.10 -m venv venv
</span></span></code></pre></td></tr></table></div></div><p>此时却出现了这样一条报错：</p><p><font color=#ff3030>Error: Command &lsquo;[&rsquo;/hy-tmp/venv/bin/python3.10&rsquo;, &lsquo;-m&rsquo;, &rsquo;ensurepip&rsquo;, &lsquo;&ndash;upgrade&rsquo;, &lsquo;&ndash;default-pip&rsquo;]&rsquo; returned non-zero exit status 1.</font></p><p>此时已经创建了venv ，报错是因为缺少<code>ensurepip</code> 模块，具体原因尚不清楚。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#先把刚刚的venv删掉</span>
</span></span><span class=line><span class=cl>rm -rf venv
</span></span><span class=line><span class=cl><span class=c1>#重新创建不带pip的venv</span>
</span></span><span class=line><span class=cl>python3.10 -m venv --without-pip venv
</span></span><span class=line><span class=cl><span class=c1>#激活虚拟环境</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> venv/bin/activate
</span></span></code></pre></td></tr></table></div></div><h1 id=三安装项目>三、安装项目</h1><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python install.py
</span></span></code></pre></td></tr></table></div></div><p>报错：<font color=#ff3030>ModuleNotFoundError: No module named &lsquo;inquirer&rsquo;</font>
尝试<code>pip</code> 却依然报错。</p><p>查阅了官方discord后发现也有人遇到过类似问题，版主给出的解决方法是：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python -m pip install --upgrade pip
</span></span></code></pre></td></tr></table></div></div><p>这时却提示缺少<code>pip</code> ，因为刚刚创建虚拟环境的时候留了一个伏笔<code>--without-pip venv</code>。手动装一个：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
</span></span><span class=line><span class=cl>python get-pip.py
</span></span></code></pre></td></tr></table></div></div><p>安装了最新版<code>pip</code> 之后就可以运行 <code>install.py</code>了。</p><p>因为显卡是N卡，所以按方向键选择<code>cuda</code>,选择两次。<img src=/p/facefusion/cuda.png width=487 height=337 srcset="/p/facefusion/cuda_hue6db1a205efefcb37953a136283cd962_10389_480x0_resize_box_3.png 480w, /p/facefusion/cuda_hue6db1a205efefcb37953a136283cd962_10389_1024x0_resize_box_3.png 1024w" loading=lazy alt=cuda class=gallery-image data-flex-grow=144 data-flex-basis=346px>
耐心等待脚本执行完毕。
大致看一眼没有报错便可进入下一步。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python run.py
</span></span></code></pre></td></tr></table></div></div><p>当出现<code>Running on local URL: http://127.0.0.1:7860</code>时即为成功启动了。此时服务器端访问<code>127.0.0.1：7860</code>即可，但是毕竟服务器端没有图形化界面，所以可以在<code>launch()</code>函数里设置<code>share=True</code>以获得可供外网访问的链接：不过我个人更喜欢配置一个端口转发。</p><p>以xshell为例，连接至实例时需要提供主机、端口、用户和密码，这些都可以在控制台界面找到。
<img src=/p/facefusion/user.png width=521 height=342 srcset="/p/facefusion/user_hu037a3405aabe8ad6fe3c30f8a6b6be05_15660_480x0_resize_box_3.png 480w, /p/facefusion/user_hu037a3405aabe8ad6fe3c30f8a6b6be05_15660_1024x0_resize_box_3.png 1024w" loading=lazy alt=user class=gallery-image data-flex-grow=152 data-flex-basis=365px>
点击<code>登录指令</code>的<code>复制</code>按钮，得到如下信息：
<code>ssh -p 41624 root@i-2.gpushare.com</code>
其中<code>41624</code> 为端口，<code>root</code> 为用户，<code>i-2.gpushare.com</code> 为主机，密码则单独列出。
新建会话，填写主机和端口，然后在侧边选项卡里找到<code>SSH</code> > <code>隧道</code>> <code>添加</code>，如图示填写：
<img src=/p/facefusion/port.png width=636 height=487 srcset="/p/facefusion/port_hu847fe2baf5811a4c09f5e63490096edc_28811_480x0_resize_box_3.png 480w, /p/facefusion/port_hu847fe2baf5811a4c09f5e63490096edc_28811_1024x0_resize_box_3.png 1024w" loading=lazy alt=port class=gallery-image data-flex-grow=130 data-flex-basis=313px>
其中<code>侦听端口</code>可随意填写。
以<code>ROOT</code> 身份登录，输入密码，成功建立会话后在本地浏览器中输入<code>127.0.0.1:8888</code>即可访问web-ui。
<img src=/p/facefusion/webui.png width=1920 height=1080 srcset="/p/facefusion/webui_hu4148f1445820120991c9481ae02315cd_195773_480x0_resize_box_3.png 480w, /p/facefusion/webui_hu4148f1445820120991c9481ae02315cd_195773_1024x0_resize_box_3.png 1024w" loading=lazy alt=webui class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>BTW，该项目引用了开源的NSFW 检测，具体代码位于<code>/facefusion/content_analyser.py</code>，可以尝试调整<code>probability</code>值。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/facefusion/>facefusion</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/sovits/><div class=article-image><img src=/p/sovits/cover.c743561fff5edc99d524a56b3fdd80d9_hu45a007dc118339db67ab8a5d3dff36de_5230_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post 云端部署so-vits-svc流程" data-key=sovits data-hash="md5-x0NWH/9e3JnVJKVrP92A2Q=="></div><div class=article-details><h2 class=article-title>云端部署so-vits-svc流程</h2></div></a></article></div></div></aside><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script>
<link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/tieba"],lang:"zh-cn",locale:{admin:"Admin"},placeholder:"不要骂人捏",requiredMeta:["name","email","url"],serverURL:"comments.fallen.wang"})</script><section class=count_info><div>本博客已稳定运行
<span id=ds class=running-days style=color:#ff7f00></span>
天
<span id=hs class=running-days style=color:#ff7f00></span>
小时
<span id=ms class=running-days style=color:#ff7f00></span>
分</div><div>发表了 14 篇博文共 41.41 k 字</div><div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span id=busuanzi_container_site_pv>已经有<span id=busuanzi_value_site_pv></span>人访问过本站了捏</span></div></section><script>let s1="2022-7-14";s1=new Date(s1.replace(/-/g,"/"));let s2=new Date,timeDifference=s2.getTime()-s1.getTime(),days=Math.floor(timeDifference/(1e3*60*60*24)),hours=Math.floor(timeDifference%(1e3*60*60*24)/(1e3*60*60)),minutes=Math.floor(timeDifference%(1e3*60*60)/(1e3*60));document.getElementById("ds").innerHTML=days,document.getElementById("hs").innerHTML=hours,document.getElementById("ms").innerHTML=minutes</script><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>