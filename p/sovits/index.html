<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="人工智能歌声合成"><title>云端部署so-vits-svc流程</title><link rel=canonical href=https://fallen.wang/p/sovits/><link rel=stylesheet href=/scss/style.min.c565f65415901be2fc8f18ecd1a49c9dec01d957d488218bc923525a68248349.css><meta property="og:title" content="云端部署so-vits-svc流程"><meta property="og:description" content="人工智能歌声合成"><meta property="og:url" content="https://fallen.wang/p/sovits/"><meta property="og:site_name" content="沙多多的奇思妙想"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="so-vits-svc"><meta property="article:published_time" content="2023-04-23T23:57:19+08:00"><meta property="article:modified_time" content="2023-04-23T23:57:19+08:00"><meta property="og:image" content="https://fallen.wang/p/sovits/cover.jpg"><meta name=twitter:title content="云端部署so-vits-svc流程"><meta name=twitter:description content="人工智能歌声合成"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fallen.wang/p/sovits/cover.jpg"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huf6c6b142173f74b63b5738ac4ca6184c_63643_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>沙多多的奇思妙想</a></h1><h2 class=site-description>分一丁目赠我</h2></div></header><ol class=social-menu><li><a href=https://github.com/lostinbreezes target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#前言>前言：</a></li><li><a href=#准备工作>准备工作</a></li><li><a href=#预处理>预处理</a></li><li><a href=#训练>训练</a></li><li><a href=#推理>推理</a></li><li><a href=#qa>Q&amp;A</a></li></ol></nav></div></section><div style=height:30%;width:30%><script type=text/javascript id=clstr_globe src="//clustrmaps.com/globe.js?d=2D0wa5tae5KJpH0hG3jzeMoWkzub9qDEpLDFMUlo6Dc"></script></div></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/sovits/><img src=/p/sovits/cover_hu45a007dc118339db67ab8a5d3dff36de_5230_800x0_resize_q75_box.jpg srcset="/p/sovits/cover_hu45a007dc118339db67ab8a5d3dff36de_5230_800x0_resize_q75_box.jpg 800w, /p/sovits/cover_hu45a007dc118339db67ab8a5d3dff36de_5230_1600x0_resize_q75_box.jpg 1600w" width=800 height=325 loading=lazy alt="Featured image of post 云端部署so-vits-svc流程"></a></div><div class=article-details><header class=article-category><a href=/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/>人工智能</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/sovits/>云端部署so-vits-svc流程</a></h2><h3 class=article-subtitle>人工智能歌声合成</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Apr 23, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 6 分钟</time></div></footer></div></header><section class=article-content><p>[TOC]</p><h1 id=前言>前言：</h1><p><font color=#1E90FF>Apr 23,2023更新：现在已经可以正常访问,项目已存档并停止维护</font>:https://github.com/svc-develop-team/so-vits-svc</p><hr><p><font color=#1E90FF>更新：目前无法正常访问Github原项目地址，据说因为有人用它跑政治敏感的东西所以作者删库跑路了=_=如果属实那么只能手动上传整合包到服务器</font>，</p><hr><p>体验了一把最近很火的so-vits-svc ，效果确实不错，但是训练模型对低配显卡很不友好，实测GTX 1650要跑一个效果还行的模型（36 epoch ,20K+ steps ）需要接近十个小时。于是考虑在云端部署，对比了几个知名GPU 租借平台，最终选了恒源云的英伟达V100 16G （恒源云打钱！）这配置用来跑sovits 是绰绰有余了，1.5元/小时的价格也比较亲民。如果选用GeForce系列的游戏卡应该能进一步压缩成本，而且效果并不会差太多。写这篇文章时已经换到了RTX 3060 12G ,0.54/小时太香了😀以下均以恒源云为例，其他平台大同小异，注意文件目录。</p><blockquote><p>为什么不使用免费的Colab ：首先，由于<em><strong>众所周知的原因</strong></em>，大陆无法正常访问谷歌。其次，Colab 目前更改了服务策略，一段时间不使用将会收回资源，这对于需要长时间训练模型的程序来说是不可接受的。</p><p>如果你会<em><strong>魔法</strong></em>并且对于自己的<em><strong>网络施法工具</strong></em>有信心，可以试试在Colab 上部署： <a class=link href=https://colab.research.google.com/github/svc-develop-team/so-vits-svc/blob/4.0/sovits4_for_colab.ipynb target=_blank rel=noopener>https://colab.research.google.com/github/svc-develop-team/so-vits-svc/blob/4.0/sovits4_for_colab.ipynb</a></p></blockquote><p><font color=#7FFF00>关于该项目的<strong>本地化</strong>使用，睿站已经有很详细的保姆级教程了，参见 https://www.bilibili.com/video/BV1H24y187Ko 本文只是介绍云端部署时的主要流程、遇到的报错及解决办法。</font>（一定要看！）</p><blockquote><p>一般情况下GPU 服务器均为Linux 系统，需要Windows 图形界面的可以去腾讯和阿里这些平台看看。关于上述视频发布的整合包只适用于Windows 系统，要在Linux 上运行可以考虑使用<code>Wine</code> 。</p></blockquote><hr><h1 id=准备工作>准备工作</h1><p>租借一张显卡，创建一个实例，然后在公共网盘处授权，以便后续下载数据集。进入<code>JupyterLab</code> ,选择<code>terminal</code> 终端。依次执行下列命令下载cli 工具：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#安装cli</span>
</span></span><span class=line><span class=cl>curl -L https://download.gpushare.com/download/gpushare-cli-linux -o /usr/local/bin/gpushare-cli
</span></span><span class=line><span class=cl>chmod u+x /usr/local/bin/gpushare-cli
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#验证是否安装成功</span>
</span></span><span class=line><span class=cl>gpushare-cli version
</span></span></code></pre></td></tr></table></div></div><p>如果服务器抽风下载很慢建议复制https 地址到浏览器手动下载然后上传到实例。或者直接释放，重开一台实例。</p><p>依次执行下列命令安装解压工具：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt-get update
</span></span><span class=line><span class=cl>apt-get install p7zip-full -y
</span></span></code></pre></td></tr></table></div></div><p>将处理好的数据集压缩并上传到网盘。</p><h1 id=预处理>预处理</h1><p>准备工作就绪，下面开始部署项目。注意切换到数据盘<code>cd hy-tmp</code> ,别把系统盘给干废了。先把项目扒到本地：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/svc-develop-team/so-vits-svc.git 
</span></span></code></pre></td></tr></table></div></div><p>这时出现了第一个报错：</p><p><img src=/p/sovits/e1.jpg width=619 height=119 srcset="/p/sovits/e1_hu2e6e230a4dc37465aeed5f7d900a61b8_16122_480x0_resize_q75_box.jpg 480w, /p/sovits/e1_hu2e6e230a4dc37465aeed5f7d900a61b8_16122_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=error1 class=gallery-image data-flex-grow=520 data-flex-basis=1248px></p><p>clone 出错，不用想，肯定是GFW 在作妖。~~GFW 你坏事做尽！~~如果是本地，我会直接改hosts 或者使用DevSideCar ，或者干脆开<em><strong>魔法</strong></em>全局加速，然而在Linux 上这些操作都比较繁琐，所以我会使用<code>gitclone</code> 代理：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://gitclone.com/github.com/svc-develop-team/so-vits-svc.git
</span></span></code></pre></td></tr></table></div></div><p>这时应该很快就扒下来了。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#进入数据集目录</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /hy-tmp/so-vits-svc/dataset_raw
</span></span><span class=line><span class=cl><span class=c1>#登陆网盘，注意用户名和密码是控制台的用户名密码</span>
</span></span><span class=line><span class=cl>gpushare-cli login -u 你的用户名 -p 你的密码
</span></span></code></pre></td></tr></table></div></div><p>以百度网盘为例</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#展开网盘内容
</span></span><span class=line><span class=cl>gpushare-cli baidu ls
</span></span></code></pre></td></tr></table></div></div><p>找到已经处理好的数据集</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#下载数据集</span>
</span></span><span class=line><span class=cl>gpushare-cli baidu down /网盘中数据集的路径 /hy-tmp/so-vits-svc/dataset_raw
</span></span></code></pre></td></tr></table></div></div><p>使用<code>7z</code>命令解压：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>7z x 数据集名称.zip -o/hy-tmp/so-vits-svc/dataset_raw
</span></span></code></pre></td></tr></table></div></div><p><code>unzip</code> 命令也是可以的，但是遇到大文件容易报错。</p><p>接下来安装运行库：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#回到上级目录</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /hy-tmp/so-vits-svc
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#安装运行库，后续如果提示缺少某模块那就单独pip安装一次，例如pip install librosa</span>
</span></span><span class=line><span class=cl>pip install -r requirements.txt
</span></span></code></pre></td></tr></table></div></div><p>待安装完成后依次运行下列命令开始预处理：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#重采样</span>
</span></span><span class=line><span class=cl><span class=n>python</span> <span class=n>resample</span><span class=o>.</span><span class=n>py</span>
</span></span><span class=line><span class=cl><span class=c1>#预处理配置</span>
</span></span><span class=line><span class=cl><span class=n>python</span> <span class=n>preprocess_flist_config</span><span class=o>.</span><span class=n>py</span>
</span></span><span class=line><span class=cl><span class=c1>#预处理hubert和f0</span>
</span></span><span class=line><span class=cl><span class=n>python</span> <span class=n>preprocess_hubert_f0</span><span class=o>.</span><span class=n>py</span>
</span></span></code></pre></td></tr></table></div></div><p>此时出现第二次报错：</p><p><img src=/p/sovits/e2.jpg width=643 height=242 srcset="/p/sovits/e2_hu7b5db90ff83acd2ba33992b51dddb2d2_40284_480x0_resize_q75_box.jpg 480w, /p/sovits/e2_hu7b5db90ff83acd2ba33992b51dddb2d2_40284_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=error2 class=gallery-image data-flex-grow=265 data-flex-basis=637px></p><p>缺少<strong>checkpoint_best_legacy_500.pt</strong> 文件。文档中说这是一个预训练模型，我们可以<code>wget</code> 下载：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget hubert/ http://obs.cstcloud.cn/share/obs/sankagenkeshi/checkpoint_best_legacy_500.pt -P /hy-tmp/so-vits-svc/hubert
</span></span></code></pre></td></tr></table></div></div><p>下载完成后再次执行<code>python preprocess_hubert_f0.py</code> 。此时应该还有一次报错，但不影响运行，程序开始生成<code>hubert</code> 和<code>f0</code> 文件。</p><h1 id=训练>训练</h1><p>生成完毕后就可以开始训练了。由于训练需要很长时间，建议使用<code>tmux</code> ，这样即使关闭了ssh 程序还能继续运行。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tmux new -s 会话名称
</span></span></code></pre></td></tr></table></div></div><p>在新建的会话窗口执行训练命令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>python</span> <span class=n>train</span><span class=o>.</span><span class=n>py</span> <span class=o>-</span><span class=n>c</span> <span class=n>configs</span><span class=o>/</span><span class=n>config</span><span class=o>.</span><span class=n>json</span> <span class=o>-</span><span class=n>m</span> <span class=mi>44</span><span class=n>k</span>
</span></span></code></pre></td></tr></table></div></div><p>出现train epoch 时表示开始训练了。<img src=/p/sovits/train.jpg width=683 height=216 srcset="/p/sovits/train_hu98231c622709f99ee761a9b65f6d1d5d_36831_480x0_resize_q75_box.jpg 480w, /p/sovits/train_hu98231c622709f99ee761a9b65f6d1d5d_36831_1024x0_resize_q75_box.jpg 1024w" loading=lazy alt=train class=gallery-image data-flex-grow=316 data-flex-basis=758px></p><h1 id=推理>推理</h1><p>训练到合适的步数就可以开始推理，参考官方文档：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python inference_main.py -m <span class=s2>&#34;logs/44k/G_30400.pth&#34;</span> -c <span class=s2>&#34;configs/config.json&#34;</span> -s <span class=s2>&#34;nen&#34;</span> -n <span class=s2>&#34;君の知らない物語-src.wav&#34;</span> -t <span class=m>0</span>
</span></span></code></pre></td></tr></table></div></div><p>其中<code>-m</code> 是模型的路径，G 后面的数字代表训练步数；<code>-c</code> 是配置文件的路径；<code>-s</code> 是说话者的名字，也就是数据集文件夹的名称；</p><p><code>-n</code> 是歌声片段，需手动上传至<code>/raw</code> 文件夹;<code>-t</code> 是移调，正负值均可，如<code>-12</code> 就是降低一个八度，<code>7</code> 就是升高一个纯五度。</p><p>（QAQ乐理有什么难的？.jpg）其他可选参数见官方文档：https://github.com/svc-develop-team/so-vits-svc#-inference</p><p>如果觉得推理这一步过于复杂可以参考前述视频的整合包，那个有图形界面，而且相比于推理，吃的配置稍微低一些，GTX 1650 可以跑个30 秒左右的音频。可以在云端训练然后把训练好的模型下载到本地进行推理。</p><p>至此云端部署过程结束。这是直接<code>git clone</code> 的项目，所以报错较少。如果头铁一定要在Linux 下运行适用于Windows 的整合包那么报错会非常多。</p><h1 id=qa>Q&amp;A</h1><blockquote><p>Q：需要的环境和框架？</p><p>A：支持CUDA 的N 卡，Python 3.8 ，Pytorch 。</p></blockquote><blockquote><p>Q：如何查看显驱对应的CUDA版本？</p><p>A：Linux 使用<code>nvcc -v</code> ,Windows 使用<code>nvidia-smi.exe</code> ，注意CUDA版本大于等于11.7请下载11.7。</p></blockquote><blockquote><p>Q：看不懂的和CUDA有关的报错？</p><p>A：大概率爆显存了，改<code>Batch Size</code> （参考前述视频）</p></blockquote><blockquote><p>Q：CUDA版本不对？</p><p>A：安装这三个库（注意torch 、CUDA 以及系统版本，以CUDA11.7 、torch 1.13 、Windows 64 位为例）：①https://download.pytorch.org/whl/cu117/torch-1.13.0%2Bcu117-cp310-cp310-win_amd64.whl，②https://download.pytorch.org/whl/cu117/torchaudio-0.13.0%2Bcu117-cp310-cp310-win_amd64.whl ,③https://download.pytorch.org/whl/cu117/torchvision-0.14.0%2Bcu117-cp310-cp310-win_amd64.whl</p><p>由于<strong>众所周知的原因</strong>这几个包下载会很慢，有能力请使用<strong>魔法</strong>。下载完之后别忘了安装：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install .<span class=se>\t</span>orch-1.13.0+cu117-cp310-cp310-win_amd64.whl
</span></span><span class=line><span class=cl>pip install .<span class=se>\t</span>orchaudio-0.13.0+cu117-cp310-cp310-win_amd64.whl
</span></span><span class=line><span class=cl>pip install .<span class=se>\t</span>orchvision-0.14.0+cu117-cp310-cp310-win_amd64.whl
</span></span></code></pre></td></tr></table></div></div></blockquote><blockquote><p>Q：为什么运行不了整合包里的批处理？</p><p>A：那个是为Windows 写的，而你使用的是Linux 服务器。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#安装Wine</span>
</span></span><span class=line><span class=cl>apt-get install wine
</span></span><span class=line><span class=cl><span class=c1>#在Wine 中运行批处理</span>
</span></span><span class=line><span class=cl>Wine /hy-tmp/so-vits-svc/批处理名称.bat
</span></span><span class=line><span class=cl><span class=c1>#如果上一条命令无效请在Wine 中运行命令行，在命令行中运行批处理</span>
</span></span><span class=line><span class=cl>Wine cmd
</span></span><span class=line><span class=cl><span class=nb>cd</span> /hy-tmp/so-vits-svc
</span></span><span class=line><span class=cl>批处理名称.bat
</span></span></code></pre></td></tr></table></div></div></blockquote><blockquote><p>Q:明明是N 卡，但是还是提示不支持CPU 训练是怎么回事？</p><p>A:驱动或者CUDA 版本不对，无法识别。</p></blockquote><p>其他报错请移步前述视频评论区。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/so-vits-svc/>so-vits-svc</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/facefusion/><div class=article-image><img src=/p/facefusion/cover.6ab3b53bc4b821bc6075f00753f1b492_huc37bc97bbc4df09ef51c4e7c54ad95ff_591899_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 云端部署FaceFusion-AI换脸" data-key=facefusion data-hash="md5-arO1O8S4IbxgdfAHU/G0kg=="></div><div class=article-details><h2 class=article-title>云端部署FaceFusion-AI换脸</h2></div></a></article></div></div></aside><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script>
<link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/tieba"],lang:"zh-cn",locale:{admin:"Admin"},placeholder:"不要骂人捏",requiredMeta:["name","email","url"],serverURL:"comments.fallen.wang"})</script><section class=count_info><div>本博客已稳定运行
<span id=ds class=running-days style=color:#ff7f00></span>
天
<span id=hs class=running-days style=color:#ff7f00></span>
小时
<span id=ms class=running-days style=color:#ff7f00></span>
分</div><div>发表了 14 篇博文共 41.41 k 字</div><div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span id=busuanzi_container_site_pv>已经有<span id=busuanzi_value_site_pv></span>人访问过本站了捏</span></div></section><script>let s1="2022-7-14";s1=new Date(s1.replace(/-/g,"/"));let s2=new Date,timeDifference=s2.getTime()-s1.getTime(),days=Math.floor(timeDifference/(1e3*60*60*24)),hours=Math.floor(timeDifference%(1e3*60*60*24)/(1e3*60*60)),minutes=Math.floor(timeDifference%(1e3*60*60)/(1e3*60));document.getElementById("ds").innerHTML=days,document.getElementById("hs").innerHTML=hours,document.getElementById("ms").innerHTML=minutes</script><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>